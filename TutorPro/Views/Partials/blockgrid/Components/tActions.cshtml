@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<Umbraco.Cms.Core.Models.Blocks.BlockGridItem>

@{
    var content = (TActions)Model.Content;
    var actionsClass = "actions ";
    if (content.TStyle == "Matirials")
        actionsClass += "matirials-actions ";
    else if (content.TStyle == "Blog")
        actionsClass += "blog-actions";
    else if (content.TStyle == "Article")
        actionsClass += "article-actions";

    if (content.TCards != null && content.TCards.Count == 1)
        actionsClass += "single-link";

    var rootPage = Umbraco.ContentAtRoot().FirstOrDefault() as HomePage;
}
<!-- Section "Actions (links + request form)" -->
<section class="@actionsClass">
    @if(content.TStyle == "")
    {
        <span class="decor-element ring1 parallax-element"></span>
    }
    @if (content.TStyle == "About")
    {
        <span class="decor-element ring1 parallax-element"></span>
        <span class="decor-element ring2 parallax-element"></span>
    }
    
    <div class="container">
        @if (content.TCards != null && content.TCards.Count > 0)
        {
            <div class="actions__links-wrap">
                <div class="actions__links">
                    @foreach (var card in content.TCards)
                    {
                        @await Html.PartialAsync("tutorPartials/TActionCard", card.Content)
                    }                   
            </div>
        </div>
        }
        @if (content.TRequestBlock != null)
        {
            <div class="actions__form-block">
                @if (content.TDecors != null)
                {
                    @foreach (var decor in content.TDecors)
                    {
                        @await Html.PartialAsync("tutorPartials/TDecorItem", decor.Content)
                    }
                }
                @if(rootPage != null)
                {
                    <div class="actions__form-wrap">
                        <h2 class="actions__form-title medium-title section-title">@content.TTitle</h2>
                        <form data-word1="@Umbraco.GetDictionaryValue("Enter") " data-word2=" @Umbraco.GetDictionaryValue("and") " data-word3="@Umbraco.GetDictionaryValue("Invalid") " data-word4=" @Umbraco.GetDictionaryValue("format")" class="actions__form request-form three-cols" method="post">
                            @Html.AntiForgeryToken()
                            @await Html.PartialAsync("tutorPartials/TRequestForm", content.TRequestBlock.FirstOrDefault()?.Content, new ViewDataDictionary(ViewData) { { "mainPage", rootPage } })
                        </form>
                        <input type="hidden" id="urlToSend" value="@rootPage?.TFormUrl" />
                        @if (rootPage?.TThanksForm != null && rootPage?.TThanksForm.FirstOrDefault() != null)
                        {
                            @await Html.PartialAsync("tutorPartials/TThanksForm", rootPage.TThanksForm?.FirstOrDefault()?.Content)
                        }
                    </div>
                }          
            </div>
        }
    </div>   
</section>
