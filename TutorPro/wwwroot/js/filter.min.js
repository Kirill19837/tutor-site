function sendRequest(n=null,t=null,i=1){var r=$("#subject").siblings(".new-select__list").find(".new-select__item.selected").attr("data-value"),u=$("#grade").siblings(".new-select__list").find(".new-select__item.selected").attr("data-value"),f=$("#level").siblings(".new-select__list").find(".new-select__item.selected").attr("data-value"),e=$("#sort").siblings(".new-select__list").find(".new-select__item.selected").attr("data-value"),o=document.getElementsByClassName("filter-form__input")[0].value,s,h;if(n!==null&&t!==null)switch(n){case"subject":r=t;break;case"grade":u=t;break;case"level":f=t;break;case"sort":e=t;break;case"search":o=t}s=document.querySelector(".matirials__pagination");h=s.getAttribute("data-pageSize");$.ajax({url:"/Umbraco/Api/Materials/GetMaterials",method:"GET",data:{subject:r,grade:u,level:f,sort:e,page:i,pageSize:h,searchText:o},success:function(n){updateContent(n)},error:function(n,t,i){console.error(i)}})}function updateContent(n){if($(".matirials__block").empty(),n.materials&&n.materials.length>0)n.materials.forEach(function(n){var t=`
                <div class="matirials__column">
                    <a class="matirials__item" href="${n.url}">
                        ${n.imageUrl?`<div class="matirials__item-image"><img loading="lazy" src="${n.imageUrl}" alt="Item image"></div>`:`<div class="matirials__item-image"></div>`}
                        <h3 class="matirials__item-title">${n.title}</h3>
                        <div class="matirials__item-tags">
                            ${n.tags.map(n=>`<span class="matirials__item-tag">${n.replace("#","")}</span>`).join("")}
                        </div>
                        ${n.text?`<p class="matirials__item-text">${n.text}</p>`:""}
                    </a>
                </div>
            `;$(".matirials__block").append(t)});else{var t=$(".matirials__block").attr("data-notFoundMessage");$(".matirials__block").html(`<h1 style="width: 100%; text-align: center;">${t}</h1>`)}updatePagination(n)}function updatePagination(n){var t,i,r;for($(".pagination__list").empty(),t=1;t<=n.totalPages;t++)i=t===n.currentPage?"active":"",r=`<li class="pagination__list-item"><a class="pagination__list-link ${i}" href="#">${t}</a></li>`,$(".pagination__list").append(r)}function getParameterByName(n){var t=new URL(window.location.href);return t.searchParams.get(n)}function handlePageChange(n){sendRequest(null,null,n);history.pushState(null,null,"?page="+n)}$(document).ready(function(){var n=getParameterByName("page");n?handlePageChange(n):handlePageChange(1);$(".filter-form__select").on("change",function(){sendRequest()});let t,i=document.querySelector("[data-searchDelay]"),r=i.getAttribute("data-searchDelay");document.querySelector(".filter-form__input").addEventListener("input",function(){clearTimeout(t);let n=this.value;t=setTimeout(function(){sendRequest("search",n)},r)});$(".pagination__list").on("click",".pagination__list-link",function(n){n.preventDefault();var t=$(this).text();handlePageChange(t)})});